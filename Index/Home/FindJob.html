<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>拉一把</title>
		<script src="../../js/mui.js"></script>
		<link href="../../css/mui.css" rel="stylesheet" />

	</head>

	<body>
		<!--头部-->
		<header class="mui-bar mui-bar-nav">
			<a id="setting" class="mui-icon mui-icon-bars mui-pull-left"></a>
			<a id="info" class="mui-icon mui-icon-search mui-pull-right" style="color: #999;"></a>
			<h1 class="mui-title">拉一把</h1>
		</header>

		<!--轮播-->
		<ul class="mui-table-view mui-table-view-chevron">
			<li id="slider_switch" class="mui-table-view-cell">
				定时轮播
				<div class="mui-switch">
					<div class="mui-switch-handle"></div>
				</div>
			</li>
		</ul>
		<div id="slider" class="mui-slider">
			<div class="mui-slider-group mui-slider-loop">
				<div class="mui-slider-item mui-slider-item-duplicate">
					<a href="#">
						<img src="../../images/yuantiao.jpg">
					</a>
				</div>
				<div class="mui-slider-item">
					<a href="#">
						<img src="../../images/cbd.jpg">
					</a>
				</div>
				<div class="mui-slider-item">
					<a href="#">
						<img src="../../images/muwu.jpg">
					</a>
				</div>
				<div class="mui-slider-item">
					<a href="#">
						<img src="../../images/shuijiao.jpg">
					</a>
				</div>
				<div class="mui-slider-item">
					<a href="#">
						<img src="../../images/yuantiao.jpg">
					</a>
				</div>
				<div class="mui-slider-item mui-slider-item-duplicate">
					<a href="#">
						<img src="../../images/cbd.jpg">
					</a>
				</div>
			</div>
			<div class="mui-slider-indicator">
				<div class="mui-indicator mui-active"></div>
				<div class="mui-indicator"></div>
				<div class="mui-indicator"></div>
				<div class="mui-indicator"></div>
			</div>
		</div>

		<!--四宫格-->
		<ul class="mui-table-view mui-grid-view mui-grid-4">
			<li class="mui-table-view-cell mui-media mui-col-xs-6">
				<a href="#">
					<img class="mui-media-object" src="../../images/cbd.jpg">
					<span class="mui-icon"><span class="mui-badge">5</span></span>
					<div class="mui-media-body">找工作</div>
				</a>
			</li>
			<li class="mui-table-view-cell mui-media mui-col-xs-6">
				<a href="#">
					<img class="mui-media-object" src="../../images/muwu.jpg">
					<span class="mui-icon"><span class="mui-badge">5</span></span>
					<div class="mui-media-body">找班组</div>
				</a>
			</li>
			<li class="mui-table-view-cell mui-media mui-col-xs-6">
				<a href="#">
					<img class="mui-media-object" src="../../images/shuijiao.jpg">
					<span class="mui-icon"><span class="mui-badge">5</span></span>
					<div class="mui-media-body">突击队</div>
				</a>
			</li>
			<li class="mui-table-view-cell mui-media mui-col-xs-6">
				<a href="#">
					<img class="mui-media-object" src="../../images/yuantiao.jpg">
					<span class="mui-icon"><span class="mui-badge">5</span></span>
					<div class="mui-media-body">物资设备租赁</div>
				</a>
			</li>
		</ul>
	</body>
	<script type="text/javascript" charset="UTF-8">
		var main, menu, mask = mui.createMask(_closeMenu);
		var showMenu = false;
		mui.init({
			swipeBack: false,
			beforeback: back
		});

		function back() {
			if (showMenu) {
				//菜单处于显示状态，返回键应该先关闭菜单,阻止主窗口执行mui.back逻辑；
				closeMenu();
				return false;
			} else {
				//菜单处于隐藏状态，执行返回时，要先close菜单页面，然后继续执行mui.back逻辑关闭主窗口；
				menu.close('none');
				return true;
			}
		}
		//点击左上角图标，打开侧滑菜单；
		document.getElementById("setting").addEventListener('tap', openMenu);
		 //主界面向左滑动，若菜单已显示，则关闭菜单；否则，不做任何操作；
		window.addEventListener("swipeleft", closeMenu);
		 //menu页面向左滑动，关闭菜单；
		window.addEventListener("menu:swipeleft", closeMenu);
		 //plusReady事件后，自动创建menu窗口；
		mui.plusReady(function() {
			main = plus.webview.currentWebview();
			//setTimeout的目的是等待窗体动画结束后，再执行create webview操作，避免资源竞争，导致窗口动画不流畅；
			setTimeout(function() {
				//侧滑菜单默认隐藏，这样可以节省内存；
				menu = mui.preload({
					id: 'Setting',
					url: '../../Setting.html',
					styles: {
						left: 0,
						width: '70%',
						zindex: 9997
					}
				});
			}, 300);
		});

		function openMenu() {
			//侧滑菜单处于隐藏状态， 则立即显示出来；
			//显示完毕后， 根据不同动画效果移动窗体；
			menu.show('none', 0, function() {
				//主窗体开始侧滑；
				main.setStyle({
					left: '70%',
					transition: {
						duration: 150
					}
				});
				//显示遮罩
				mask.show();
				showMenu = true;
			})
		}
		
		/**
		 * 关闭侧滑菜单
		 */
		function closeMenu () {
			_closeMenu();
			//关闭遮罩
			mask.close();
		}

		function closeMenu() {
				_closeMenu();
				//关闭遮罩
				mask.close();
			}
			/**
			 * 关闭侧滑菜单（业务部分）
			 */

		function _closeMenu() {
			if (showMenu) {
				//主窗体开始侧滑；
				main.setStyle({
					left: '0',
					transition: {
						duration: 150
					}
				});
			}
			//等窗体动画结束后，隐藏菜单webview，节省资源；
			setTimeout(function() {
				menu.hide();
			}, 200);
			//改变标志位
			showMenu = false;
		}
	</script>

</html>